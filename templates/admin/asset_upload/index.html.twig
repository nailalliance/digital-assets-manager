{% extends 'base.html.twig' %}

{% block title %}Upload New Assets | {{ parent() }}{% endblock %}

{% block body %}
    <div class="max-w-4xl mx-auto">
        <div class="bg-white rounded-lg shadow-xl p-8">
            <h1 class="text-3xl font-bold text-gray-900 mb-2">Upload Assets</h1>
            <p class="text-gray-600 mb-6">Drag and drop a file or click the area below to select a file for upload.</p>

            <div
                data-controller="tus-upload">
                <form data-action="submit->tus-upload#upload">

                    {# The Dropzone Area #}
                    <div
                        data-tus-upload-target="dropzone"
                        data-action="dragover->tus-upload#dragover dragleave->tus-upload#dragleave drop->tus-upload#drop"
                        class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer transition-colors"
                    >
                        <div class="flex flex-col items-center pointer-events-none">
                            <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-4-4V7a4 4 0 014-4h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V16a4 4 0 01-4 4H7z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11v6m-3-3h6"></path></svg>
                            <p class="mt-4 text-lg text-gray-600">
                                <span class="font-semibold text-violet-600">Click to upload</span> or drag and drop
                            </p>
                            <p class="mt-1 text-sm text-gray-500" data-tus-upload-target="fileNameDisplay">No file selected</p>
                        </div>
                        <input
                            type="file"
                            class="hidden"
                            data-tus-upload-target="fileInput"
                            data-action="change->tus-upload#fileSelected"
                        >
                    </div>

                    <!-- Progress Bar Section -->
                    {# FIX: Changed data-tus-upload-target to "progressContainer" #}
                    <div class="hidden mt-4" data-tus-upload-target="progressContainer">
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-2">
                            <div class="bg-violet-600 h-2.5 rounded-full transition-all duration-300" data-tus-upload-target="progressBar" style="width: 0%"></div>
                        </div>
                        {# FIX: Added data-tus-upload-target to the percentage text element #}
                        <p class="text-sm text-center text-gray-600" data-tus-upload-target="progressText"></p>
                    </div>

                    <!-- Error Message Area -->
                    <div class="hidden bg-red-100 text-red-700 p-3 rounded-md my-4" data-tus-upload-target="errorMessage"></div>

                    <div class="mt-8 pt-5 border-t border-gray-200 flex justify-end">
                        <button type="submit"
                                data-tus-upload-target="submitButton"
                                class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-violet-600 hover:bg-violet-700 disabled:bg-gray-400 disabled:cursor-not-allowed"
                                disabled>
                            Start Upload
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}
